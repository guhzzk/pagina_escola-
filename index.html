<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TARGET MASTER ULTIMATE üéØ</title>
    <style>
        :root {
            --primary: #FF416C;
            --primary-dark: #FF4B2B;
            --secondary: #00C9FF;
            --secondary-dark: #00B4DB;
            --success: #00B09B;
            --warning: #FFA62E;
            --danger: #FF416C;
            --dark: #0F0F1E;
            --darker: #0A0A14;
            --light: #F8F9FA;
            --card-bg: rgba(255, 255, 255, 0.05);
            --card-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Layout Principal */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 280px 1fr 300px;
            gap: 20px;
            min-height: 100vh;
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        /* Sidebars */
        .sidebar {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        /* Header do Jogo */
        .game-header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 20px;
            padding: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(255, 65, 108, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 2.2rem;
            font-weight: 800;
            color: white;
        }

        .logo i {
            font-size: 2.5rem;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }

        /* √Årea de Jogo Principal */
        .game-main {
            grid-column: 2;
            position: relative;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.2));
            border-radius: 20px;
            border: 2px solid var(--card-border);
            overflow: hidden;
            height: 700px;
        }

        /* Sistema de Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 800;
            margin: 10px 0;
            color: var(--secondary);
            text-shadow: 0 0 10px rgba(0, 201, 255, 0.5);
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            color: var(--light);
        }

        /* Bot√µes e Controles */
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 16px 25px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 201, 255, 0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #009688);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #FF8A00);
        }

        /* √Årea de Tiro */
        .shooting-range {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: radial-gradient(circle at center, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.5) 100%);
        }

        /* Sistema de Alvos */
        .target {
            position: absolute;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            transition: transform 0.1s ease, opacity 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.3);
            animation: float 3s ease-in-out infinite;
            transform-origin: center;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }

        .target::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
        }

        .target.hit {
            animation: hitEffect 0.5s ease-out forwards !important;
        }

        @keyframes hitEffect {
            0% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.3) rotate(180deg); opacity: 0.7; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        .target.missed {
            animation: missEffect 0.5s ease-out forwards;
        }

        @keyframes missEffect {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.8); opacity: 0; }
        }

        /* Sistema de HUD */
        .hud {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            pointer-events: none;
        }

        .timer {
            font-size: 3rem;
            font-weight: 800;
            color: white;
            text-shadow: 0 0 20px var(--secondary);
            background: rgba(0, 0, 0, 0.5);
            padding: 15px 30px;
            border-radius: 15px;
            border: 2px solid var(--secondary);
        }

        .combo-display {
            background: linear-gradient(135deg, var(--primary), var(--warning));
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 1.5rem;
            font-weight: 600;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: none;
        }

        /* Sistema de Feedback */
        .hit-feedback {
            position: absolute;
            pointer-events: none;
            font-size: 2rem;
            font-weight: 800;
            color: var(--secondary);
            text-shadow: 0 0 10px rgba(0, 201, 255, 0.8);
            z-index: 50;
            animation: feedbackFloat 1s ease-out forwards;
        }

        @keyframes feedbackFloat {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(0.5); opacity: 0; }
        }

        .miss-feedback {
            position: absolute;
            pointer-events: none;
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(255, 65, 108, 0.8);
            z-index: 50;
            animation: feedbackFloat 1s ease-out forwards;
        }

        /* Modais */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: linear-gradient(135deg, var(--dark), var(--darker));
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            border: 2px solid var(--secondary);
            box-shadow: 0 20px 60px rgba(0, 201, 255, 0.3);
            text-align: center;
        }

        /* Progress Bars */
        .progress-container {
            margin: 20px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .progress-bar {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        /* Loja e Items */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .shop-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .shop-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--secondary);
            transform: translateY(-5px);
        }

        .shop-item.owned {
            background: rgba(0, 176, 155, 0.1);
            border-color: var(--success);
        }

        /* Sistema de Power-ups */
        .power-ups-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .power-up {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .power-up:hover {
            border-color: var(--secondary);
            transform: scale(1.05);
        }

        .power-up.active {
            border-color: var(--warning);
            box-shadow: 0 0 20px rgba(255, 166, 46, 0.5);
        }

        .power-up.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Anima√ß√µes Especiais */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--secondary); }
            50% { box-shadow: 0 0 30px var(--secondary); }
        }

        .glow {
            animation: glow 2s infinite;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
                grid-template-columns: 1fr;
            }
            
            .game-main {
                height: 500px;
            }
            
            .hud {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
            
            .timer {
                font-size: 2rem;
                text-align: center;
            }
            
            .logo {
                font-size: 1.5rem;
            }
        }

        /* Scrollbar Customizada */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--darker);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="game-header">
            <div class="logo">
                <i class="fas fa-crosshairs"></i>
                <div>
                    <div>TARGET MASTER</div>
                    <div style="font-size: 1rem; opacity: 0.8;">ULTIMATE EDITION</div>
                </div>
            </div>
            <div style="display: flex; gap: 20px; align-items: center;">
                <div style="text-align: right;">
                    <div style="font-size: 1.5rem; font-weight: 800;">JOGADOR 1</div>
                    <div style="opacity: 0.8; font-size: 0.9rem;">N√≠vel <span id="playerLevel">1</span></div>
                </div>
                <div style="background: rgba(0,0,0,0.3); padding: 10px 20px; border-radius: 50px; border: 2px solid var(--warning);">
                    <i class="fas fa-coins" style="color: gold; margin-right: 10px;"></i>
                    <span id="coins" style="font-weight: 800; font-size: 1.2rem;">1000</span>
                </div>
            </div>
        </header>

        <!-- Sidebar Esquerda - Stats -->
        <aside class="sidebar">
            <h3 style="margin-bottom: 20px; color: var(--secondary);">
                <i class="fas fa-chart-line"></i> ESTAT√çSTICAS
            </h3>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">PONTUA√á√ÉO</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">RECORDE</div>
                    <div class="stat-value" id="highScore">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">PRECIS√ÉO</div>
                    <div class="stat-value" id="accuracy">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ALVOS</div>
                    <div class="stat-value" id="targetsHit">0</div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-label">
                    <span>EXPERI√äNCIA</span>
                    <span id="xpText">0/100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="xpBar" style="width: 0%"></div>
                </div>
            </div>

            <h3 style="margin: 30px 0 20px 0; color: var(--secondary);">
                <i class="fas fa-gamepad"></i> CONTROLES
            </h3>

            <button class="btn btn-success" id="startBtn">
                <i class="fas fa-play"></i> INICIAR
            </button>
            
            <button class="btn" id="pauseBtn">
                <i class="fas fa-pause"></i> PAUSAR
            </button>
            
            <button class="btn btn-warning" id="shopBtn">
                <i class="fas fa-store"></i> LOJA
            </button>

            <div style="margin: 25px 0;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4 style="color: var(--secondary);">
                        <i class="fas fa-sliders-h"></i> DIFICULDADE
                    </h4>
                    <span id="difficultyBadge" style="background: var(--success); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">F√ÅCIL</span>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button class="difficulty-btn active" data-level="1" style="flex: 1; padding: 10px; background: var(--success); border: none; border-radius: 10px; color: white; cursor: pointer;">F√ÅCIL</button>
                    <button class="difficulty-btn" data-level="2" style="flex: 1; padding: 10px; background: rgba(255, 166, 46, 0.3); border: 1px solid var(--warning); border-radius: 10px; color: var(--warning); cursor: pointer;">M√âDIO</button>
                    <button class="difficulty-btn" data-level="3" style="flex: 1; padding: 10px; background: rgba(255, 65, 108, 0.3); border: 1px solid var(--primary); border-radius: 10px; color: var(--primary); cursor: pointer;">DIF√çCIL</button>
                </div>
            </div>
        </aside>

        <!-- √Årea Principal do Jogo -->
        <main class="game-main">
            <div class="shooting-range" id="shootingRange">
                <div class="hud">
                    <div class="timer" id="timer">60</div>
                    <div class="combo-display" id="comboDisplay">COMBO: 100x</div>
                </div>
                <!-- Alvos aparecer√£o aqui -->
            </div>
        </main>

        <!-- Sidebar Direita - Power-ups e Progresso -->
        <aside class="sidebar">
            <h3 style="margin-bottom: 20px; color: var(--secondary);">
                <i class="fas fa-bolt"></i> POWER-UPS
            </h3>
            
            <div class="power-ups-grid">
                <div class="power-up" id="powerupSlow" data-price="50">
                    <div style="font-size: 2rem; margin-bottom: 10px;">üêå</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">LENTID√ÉO</div>
                    <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">1</div>
                </div>
                
                <div class="power-up" id="powerupDouble" data-price="100">
                    <div style="font-size: 2rem; margin-bottom: 10px;">‚úñÔ∏è</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">DOBRO</div>
                    <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">1</div>
                </div>
                
                <div class="power-up" id="powerupAuto" data-price="150">
                    <div style="font-size: 2rem; margin-bottom: 10px;">ü§ñ</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">AUTO</div>
                    <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">1</div>
                </div>
            </div>

            <div style="margin: 30px 0;">
                <h4 style="color: var(--secondary); margin-bottom: 15px;">
                    <i class="fas fa-bullseye"></i> ALVO ATUAL
                </h4>
                <div id="currentTarget" style="width: 80px; height: 80px; margin: 0 auto; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); display: flex; align-items: center; justify-content: center; font-size: 2.5rem; border: 3px solid white; box-shadow: 0 0 20px var(--primary);">
                    üéØ
                </div>
            </div>

            <div>
                <h4 style="color: var(--secondary); margin-bottom: 15px;">
                    <i class="fas fa-trophy"></i> CONQUISTAS
                </h4>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                        <div style="font-size: 1.5rem;">ü•á</div>
                        <div>
                            <div style="font-weight: 600;">PRIMEIRO SANGUE</div>
                            <div style="font-size: 0.8rem; opacity: 0.8;">Acerte seu primeiro alvo</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                        <div style="font-size: 1.5rem;">üî•</div>
                        <div>
                            <div style="font-weight: 600;">COMBO 10x</div>
                            <div style="font-size: 0.8rem; opacity: 0.8;">Alcance um combo de 10</div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Modal de Game Over -->
        <div class="modal" id="gameOverModal">
            <div class="modal-content">
                <div style="font-size: 4rem; margin-bottom: 20px;">üèÜ</div>
                <h2 style="color: var(--secondary); font-size: 2.5rem; margin-bottom: 10px;">FIM DE JOGO!</h2>
                <div style="font-size: 5rem; font-weight: 800; color: white; margin: 20px 0; text-shadow: 0 0 20px var(--secondary);" id="finalScore">0</div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0;">
                    <div>
                        <div style="font-size: 2rem; color: var(--secondary);" id="finalAccuracy">0%</div>
                        <div style="opacity: 0.8;">Precis√£o</div>
                    </div>
                    <div>
                        <div style="font-size: 2rem; color: gold;" id="finalCoins">+100000</div>
                        <div style="opacity: 0.8;">Moedas</div>
                    </div>
                    <div>
                        <div style="font-size: 2rem; color: var(--warning);" id="finalCombo">100x</div>
                        <div style="opacity: 0.8;">Combo</div>
                    </div>
                </div>

                <button class="btn btn-success" id="playAgainBtn" style="margin-top: 20px;">
                    <i class="fas fa-redo"></i> JOGAR NOVAMENTE
                </button>
            </div>
        </div>

        <!-- Modal da Loja -->
        <div class="modal" id="shopModal">
            <div class="modal-content">
                <h2 style="color: var(--secondary); margin-bottom: 30px;">
                    <i class="fas fa-store"></i> LOJA DE ALVOS
                </h2>
                
                <div class="shop-grid">
                    <div class="shop-item owned">
                        <div style="font-size: 2.5rem;">üéØ</div>
                        <div style="margin-top: 10px; font-weight: 600;">CL√ÅSSICO</div>
                        <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">GR√ÅTIS</div>
                    </div>
                    
                    <div class="shop-item" data-price="500">
                        <div style="font-size: 2.5rem;">üí∞</div>
                        <div style="margin-top: 10px; font-weight: 600;">DOURADO</div>
                        <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">500</div>
                    </div>
                    
                    <div class="shop-item" data-price="1000">
                        <div style="font-size: 2.5rem;">üíé</div>
                        <div style="margin-top: 10px; font-weight: 600;">DIAMANTE</div>
                        <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">1000</div>
                    </div>
                    
                    <div class="shop-item" data-price="750">
                        <div style="font-size: 2.5rem;">üî•</div>
                        <div style="margin-top: 10px; font-weight: 600;">FOGO</div>
                        <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">750</div>
                    </div>
                </div>

                <button class="btn" id="closeShopBtn" style="margin-top: 30px;">
                    <i class="fas fa-times"></i> FECHAR
                </button>
            </div>
        </div>
    </div>

    <script>
        // =============================================
        // SISTEMA DE JOGO COMPLETO E TESTADO
        // =============================================

        // Estado do Jogo
        const Game = {
            // Estat√≠sticas
            score: 0,
            highScore: parseInt(localStorage.getItem('tm_highScore')) || 0,
            coins: parseInt(localStorage.getItem('tm_coins')) || 1000,
            level: parseInt(localStorage.getItem('tm_level')) || 1,
            xp: parseInt(localStorage.getItem('tm_xp')) || 0,
            xpNeeded: 100,
            
            // Jogo Ativo
            active: false,
            paused: false,
            timeLeft: 60,
            timer: null,
            
            // Precis√£o e Acertos
            hits: 0,
            misses: 0,
            totalShots: 0,
            
            // Sistema de Combo
            combo: 0,
            maxCombo: 0,
            comboTime: 0,
            comboTimeout: null,
            
            // Dificuldade
            difficulty: 1,
            difficulties: {
                1: { name: "F√ÅCIL", spawnRate: 1500, speed: 1.0, points: 10, penalty: 5, size: 80 },
                2: { name: "M√âDIO", spawnRate: 1000, speed: 1.5, points: 15, penalty: 8, size: 60 },
                3: { name: "DIF√çCIL", spawnRate: 700, speed: 2.0, points: 20, penalty: 12, size: 50 }
            },
            
            // Power-ups Ativos
            powerUps: {
                slowTime: false,
                doublePoints: false,
                autoClick: false
            },
            
            // Alvos Ativos
            targets: [],
            targetInterval: null,
            
            // Sistema de Skin
            skin: localStorage.getItem('tm_skin') || 'classic',
            skins: {
                classic: { emoji: 'üéØ', color: 'linear-gradient(135deg, #FF416C, #FF4B2B)' },
                gold: { emoji: 'üí∞', color: 'linear-gradient(135deg, #FFD700, #FFA500)' },
                diamond: { emoji: 'üíé', color: 'linear-gradient(135deg, #00C9FF, #00B4DB)' },
                fire: { emoji: 'üî•', color: 'linear-gradient(135deg, #FF8A00, #FF416C)' }
            }
        };

        // =============================================
        // ELEMENTOS DO DOM
        // =============================================
        const elements = {
            // √Årea de jogo
            shootingRange: document.getElementById('shootingRange'),
            
            // Estat√≠sticas
            score: document.getElementById('score'),
            highScore: document.getElementById('highScore'),
            accuracy: document.getElementById('accuracy'),
            targetsHit: document.getElementById('targetsHit'),
            coins: document.getElementById('coins'),
            playerLevel: document.getElementById('playerLevel'),
            xpText: document.getElementById('xpText'),
            xpBar: document.getElementById('xpBar'),
            
            // HUD
            timer: document.getElementById('timer'),
            comboDisplay: document.getElementById('comboDisplay'),
            
            // Bot√µes
            startBtn: document.getElementById('startBtn'),
            pauseBtn: document.getElementById('pauseBtn'),
            shopBtn: document.getElementById('shopBtn'),
            playAgainBtn: document.getElementById('playAgainBtn'),
            closeShopBtn: document.getElementById('closeShopBtn'),
            
            // Modais
            gameOverModal: document.getElementById('gameOverModal'),
            shopModal: document.getElementById('shopModal'),
            
            // Dificuldade
            difficultyBadge: document.getElementById('difficultyBadge'),
            difficultyBtns: document.querySelectorAll('.difficulty-btn'),
            
            // Power-ups
            powerupSlow: document.getElementById('powerupSlow'),
            powerupDouble: document.getElementById('powerupDouble'),
            powerupAuto: document.getElementById('powerupAuto'),
            
            // Alvo atual
            currentTarget: document.getElementById('currentTarget')
        };

        // =============================================
        // FUN√á√ïES PRINCIPAIS DO JOGO
        // =============================================

        // Inicializar o jogo
        function initGame() {
            updateUI();
            loadGameState();
            setupEventListeners();
            
            // Atualizar skin atual
            updateCurrentTarget();
            
            console.log("‚úÖ Jogo inicializado com sucesso!");
        }

        // Carregar estado do jogo
        function loadGameState() {
            elements.highScore.textContent = Game.highScore;
            elements.coins.textContent = Game.coins;
            elements.playerLevel.textContent = Game.level;
            updateXPDisplay();
        }

        // Atualizar UI
        function updateUI() {
            elements.score.textContent = Game.score;
            elements.accuracy.textContent = Game.totalShots > 0 
                ? Math.round((Game.hits / Game.totalShots) * 100) + '%' 
                : '0%';
            elements.targetsHit.textContent = Game.hits;
            elements.coins.textContent = Game.coins;
        }

        // Atualizar display de XP
        function updateXPDisplay() {
            elements.xpText.textContent = `${Game.xp}/${Game.xpNeeded}`;
            elements.xpBar.style.width = `${(Game.xp / Game.xpNeeded) * 100}%`;
        }

        // Atualizar alvo atual
        function updateCurrentTarget() {
            const skin = Game.skins[Game.skin];
            elements.currentTarget.style.background = skin.color;
            elements.currentTarget.innerHTML = skin.emoji;
        }

        // =============================================
        // SISTEMA DE ALVOS
        // =============================================

        // Criar um novo alvo
        function createTarget() {
            if (!Game.active || Game.paused) return;
            
            const difficulty = Game.difficulties[Game.difficulty];
            const rangeRect = elements.shootingRange.getBoundingClientRect();
            
            // Tamanho base do alvo
            const baseSize = difficulty.size;
            const size = Game.powerUps.slowTime ? baseSize * 1.2 : baseSize;
            
            // Posi√ß√£o aleat√≥ria
            const x = Math.random() * (rangeRect.width - size);
            const y = Math.random() * (rangeRect.height - size);
            
            // Criar elemento do alvo
            const target = document.createElement('div');
            target.className = 'target';
            target.style.width = `${size}px`;
            target.style.height = `${size}px`;
            target.style.left = `${x}px`;
            target.style.top = `${y}px`;
            
            // Aplicar skin
            const skin = Game.skins[Game.skin];
            target.style.background = skin.color;
            target.innerHTML = `<div style="font-size: ${size/2}px;">${skin.emoji}</div>`;
            
            // Adicionar evento de clique
            target.addEventListener('click', handleTargetHit);
            
            // Adicionar √† √°rea de jogo
            elements.shootingRange.appendChild(target);
            
            // Armazenar refer√™ncia
            const targetObj = {
                element: target,
                x: x,
                y: y,
                size: size,
                createdAt: Date.now(),
                hit: false
            };
            
            Game.targets.push(targetObj);
            
            // Remover alvo ap√≥s tempo
            const speed = Game.powerUps.slowTime ? difficulty.speed * 0.6 : difficulty.speed;
            setTimeout(() => {
                if (!targetObj.hit && Game.active) {
                    removeTarget(targetObj, false);
                    Game.misses++;
                    Game.totalShots++;
                    Game.combo = 0;
                    updateComboDisplay();
                    updateUI();
                }
            }, 2000 / speed);
        }

        // Manipular acerto no alvo
        function handleTargetHit(event) {
            if (!Game.active || Game.paused) return;
            
            event.stopPropagation();
            const targetElement = event.currentTarget;
            
            // Encontrar o objeto do alvo
            const targetObj = Game.targets.find(t => t.element === targetElement);
            if (!targetObj || targetObj.hit) return;
            
            targetObj.hit = true;
            
            // Calcular pontos
            let points = Game.difficulties[Game.difficulty].points;
            
            // Aplicar multiplicadores
            if (Game.powerUps.doublePoints) points *= 2;
            points += Math.floor(Game.combo / 3); // B√¥nus de combo
            
            // Atualizar pontua√ß√£o
            Game.score += points;
            Game.hits++;
            Game.totalShots++;
            Game.combo++;
            Game.maxCombo = Math.max(Game.maxCombo, Game.combo);
            
            // Atualizar UI
            updateUI();
            updateComboDisplay();
            
            // Feedback visual
            showHitFeedback(targetElement, `+${points}`);
            targetElement.classList.add('hit');
            
            // Remover alvo
            setTimeout(() => {
                removeTarget(targetObj, true);
            }, 500);
            
            // Resetar combo timeout
            resetComboTimeout();
        }

        // Remover alvo
        function removeTarget(target, wasHit) {
            const index = Game.targets.indexOf(target);
            if (index > -1) {
                Game.targets.splice(index, 1);
            }
            
            if (target.element.parentNode) {
                if (!wasHit) {
                    target.element.classList.add('missed');
                    setTimeout(() => {
                        if (target.element.parentNode) {
                            target.element.remove();
                        }
                    }, 500);
                } else {
                    target.element.remove();
                }
            }
        }

        // Mostrar feedback de acerto
        function showHitFeedback(targetElement, text) {
            const rect = targetElement.getBoundingClientRect();
            const rangeRect = elements.shootingRange.getBoundingClientRect();
            
            const feedback = document.createElement('div');
            feedback.className = 'hit-feedback';
            feedback.textContent = text;
            feedback.style.left = `${rect.left - rangeRect.left + rect.width/2}px`;
            feedback.style.top = `${rect.top - rangeRect.top}px`;
            
            elements.shootingRange.appendChild(feedback);
            
            setTimeout(() => {
                if (feedback.parentNode) {
                    feedback.remove();
                }
            }, 1000);
        }

        // =============================================
        // SISTEMA DE COMBO
        // =============================================

        // Atualizar display de combo
        function updateComboDisplay() {
            if (Game.combo > 1) {
                elements.comboDisplay.style.display = 'block';
                elements.comboDisplay.textContent = `COMBO: ${Game.combo}x`;
                elements.comboDisplay.style.background = `linear-gradient(135deg, 
                    ${Game.combo > 5 ? '#FF416C' : '#FFA62E'}, 
                    ${Game.combo > 5 ? '#FF8A00' : '#FFD700'})`;
            } else {
                elements.comboDisplay.style.display = 'none';
            }
        }

        // Resetar timeout do combo
        function resetComboTimeout() {
            if (Game.comboTimeout) {
                clearTimeout(Game.comboTimeout);
            }
            
            Game.comboTimeout = setTimeout(() => {
                if (Game.combo > 1) {
                    // B√¥nus de combo grande
                    if (Game.combo >= 10) {
                        Game.coins += 50;
                        showHitFeedback(elements.comboDisplay, `+50 Moedas!`);
                    } else if (Game.combo >= 5) {
                        Game.coins += 20;
                        showHitFeedback(elements.comboDisplay, `+20 Moedas!`);
                    }
                }
                Game.combo = 0;
                updateComboDisplay();
                updateUI();
            }, 3000); // Combo dura 3 segundos
        }

        // =============================================
        // SISTEMA DE PUNI√á√ÉO POR ERRO
        // =============================================

        // Manipular clique fora do alvo
        function handleMissClick(event) {
            if (!Game.active || Game.paused) return;
            
            // Verificar se clicou em um alvo
            if (event.target.classList.contains('target')) return;
            
            // Penalidade por erro
            const penalty = Game.difficulties[Game.difficulty].penalty;
            Game.score = Math.max(0, Game.score - penalty);
            Game.misses++;
            Game.totalShots++;
            Game.combo = 0;
            
            // Feedback visual
            const feedback = document.createElement('div');
            feedback.className = 'miss-feedback';
            feedback.textContent = `-${penalty}`;
            feedback.style.left = `${event.clientX - elements.shootingRange.getBoundingClientRect().left}px`;
            feedback.style.top = `${event.clientY - elements.shootingRange.getBoundingClientRect().top}px`;
            
            elements.shootingRange.appendChild(feedback);
            
            setTimeout(() => {
                if (feedback.parentNode) {
                    feedback.remove();
                }
            }, 1000);
            
            // Atualizar UI
            updateUI();
            updateComboDisplay();
            
            console.log(`‚ùå Erro! -${penalty} pontos`);
        }

        // =============================================
        // SISTEMA DE POWER-UPS
        // =============================================

        // Ativar power-up
        function activatePowerUp(powerUpId, price) {
            if (Game.coins < price) {
                alert('Moedas insuficientes!');
                return;
            }
            
            Game.coins -= price;
            Game.powerUps[powerUpId] = true;
            
            // Efeito visual
            const element = document.getElementById(`powerup${powerUpId.charAt(0).toUpperCase() + powerUpId.slice(1)}`);
            if (element) {
                element.classList.add('active');
                
                // Desativar ap√≥s tempo
                setTimeout(() => {
                    Game.powerUps[powerUpId] = false;
                    element.classList.remove('active');
                }, getPowerUpDuration(powerUpId));
            }
            
            updateUI();
            console.log(`‚úÖ Power-up ativado: ${powerUpId}`);
        }

        // Dura√ß√£o dos power-ups
        function getPowerUpDuration(powerUpId) {
            const durations = {
                slowTime: 10000,    // 10 segundos
                doublePoints: 15000, // 15 segundos
                autoClick: 5000     // 5 segundos
            };
            return durations[powerUpId] || 10000;
        }

        // =============================================
        // CONTROLE DO JOGO
        // =============================================

        // Iniciar jogo
        function startGame() {
            if (Game.active) {
                resetGame();
                return;
            }
            
            Game.active = true;
            Game.paused = false;
            Game.timeLeft = 60;
            
            // Atualizar UI
            elements.startBtn.innerHTML = '<i class="fas fa-redo"></i> REINICIAR';
            elements.timer.textContent = Game.timeLeft;
            elements.timer.classList.add('glow');
            
            // Iniciar timer
            Game.timer = setInterval(() => {
                if (!Game.paused) {
                    Game.timeLeft--;
                    elements.timer.textContent = Game.timeLeft;
                    
                    if (Game.timeLeft <= 10) {
                        elements.timer.style.color = '#FF416C';
                        elements.timer.style.animation = 'pulse 0.5s infinite';
                    }
                    
                    if (Game.timeLeft <= 0) {
                        endGame();
                    }
                }
            }, 1000);
            
            // Iniciar spawn de alvos
            const difficulty = Game.difficulties[Game.difficulty];
            Game.targetInterval = setInterval(createTarget, difficulty.spawnRate);
            
            console.log("üéÆ Jogo iniciado!");
        }

        // Pausar jogo
        function togglePause() {
            if (!Game.active) return;
            
            Game.paused = !Game.paused;
            
            if (Game.paused) {
                elements.pauseBtn.innerHTML = '<i class="fas fa-play"></i> CONTINUAR';
                clearInterval(Game.targetInterval);
                elements.timer.classList.remove('glow');
            } else {
                elements.pauseBtn.innerHTML = '<i class="fas fa-pause"></i> PAUSAR';
                const difficulty = Game.difficulties[Game.difficulty];
                Game.targetInterval = setInterval(createTarget, difficulty.spawnRate);
                elements.timer.classList.add('glow');
            }
        }

        // Finalizar jogo
        function endGame() {
            Game.active = false;
            
            // Limpar intervalos
            clearInterval(Game.timer);
            clearInterval(Game.targetInterval);
            clearTimeout(Game.comboTimeout);
            
            // Remover alvos
            Game.targets.forEach(target => {
                if (target.element.parentNode) {
                    target.element.remove();
                }
            });
            Game.targets = [];
            
            // Calcular estat√≠sticas finais
            const accuracy = Game.totalShots > 0 
                ? Math.round((Game.hits / Game.totalShots) * 100) 
                : 0;
            
            // Calcular moedas ganhas
            let coinsEarned = Math.floor(Game.score / 10);
            
            // B√¥nus por precis√£o
            if (accuracy >= 90) coinsEarned *= 2;
            else if (accuracy >= 80) coinsEarned = Math.floor(coinsEarned * 1.5);
            else if (accuracy >= 70) coinsEarned = Math.floor(coinsEarned * 1.2);
            
            // B√¥nus por combo m√°ximo
            if (Game.maxCombo >= 10) coinsEarned += 100;
            else if (Game.maxCombo >= 5) coinsEarned += 50;
            
            // Atualizar estado do jogo
            Game.coins += coinsEarned;
            
            if (Game.score > Game.highScore) {
                Game.highScore = Game.score;
                localStorage.setItem('tm_highScore', Game.highScore);
            }
            
            // Adicionar XP
            Game.xp += Math.floor(Game.score / 5);
            if (Game.xp >= Game.xpNeeded) {
                Game.level++;
                Game.xp = Game.xp - Game.xpNeeded;
                Game.xpNeeded = Math.floor(Game.xpNeeded * 1.5);
                coinsEarned += 200; // B√¥nus por level up
            }
            
            // Salvar progresso
            saveProgress();
            
            // Atualizar modal de game over
            elements.finalScore.textContent = Game.score;
            elements.finalAccuracy.textContent = accuracy + '%';
            elements.finalCoins.textContent = '+' + coinsEarned;
            elements.finalCombo.textContent = Game.maxCombo + 'x';
            
            // Mostrar modal
            elements.gameOverModal.style.display = 'flex';
            
            console.log(`üèÅ Fim de jogo! Pontua√ß√£o: ${Game.score}`);
        }

        // Reiniciar jogo
        function resetGame() {
            endGame();
            
            // Resetar estat√≠sticas
            Game.score = 0;
            Game.hits = 0;
            Game.misses = 0;
            Game.totalShots = 0;
            Game.combo = 0;
            Game.maxCombo = 0;
            
            // Atualizar UI
            updateUI();
            updateComboDisplay();
            
            // Esconder modal
            elements.gameOverModal.style.display = 'none';
            
            // Reiniciar timer
            elements.timer.textContent = '60';
            elements.timer.style.color = 'white';
            elements.timer.style.animation = '';
            
            // Iniciar novo jogo
            setTimeout(startGame, 500);
        }

        // =============================================
        // SISTEMA DE PROGRESSO
        // =============================================

        // Salvar progresso
        function saveProgress() {
            localStorage.setItem('tm_coins', Game.coins);
            localStorage.setItem('tm_level', Game.level);
            localStorage.setItem('tm_xp', Game.xp);
            localStorage.setItem('tm_skin', Game.skin);
            updateUI();
            updateXPDisplay();
        }

        // =============================================
        // EVENT LISTENERS
        // =============================================

        function setupEventListeners() {
            // Bot√µes de controle
            elements.startBtn.addEventListener('click', startGame);
            elements.pauseBtn.addEventListener('click', togglePause);
            elements.playAgainBtn.addEventListener('click', resetGame);
            
            // Loja
            elements.shopBtn.addEventListener('click', () => {
                elements.shopModal.style.display = 'flex';
            });
            
            elements.closeShopBtn.addEventListener('click', () => {
                elements.shopModal.style.display = 'none';
            });
            
            // Dificuldade
            elements.difficultyBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    elements.difficultyBtns.forEach(b => {
                        b.classList.remove('active');
                        b.style.background = 'rgba(255,255,255,0.05)';
                        b.style.border = '1px solid rgba(255,255,255,0.1)';
                        b.style.color = 'white';
                    });
                    
                    btn.classList.add('active');
                    btn.style.background = Game.difficulties[btn.dataset.level].name === 'F√ÅCIL' ? 
                        '#00B09B' : Game.difficulties[btn.dataset.level].name === 'M√âDIO' ? 
                        '#FFA62E' : '#FF416C';
                    btn.style.border = 'none';
                    btn.style.color = 'white';
                    
                    Game.difficulty = parseInt(btn.dataset.level);
                    elements.difficultyBadge.textContent = Game.difficulties[Game.difficulty].name;
                    elements.difficultyBadge.style.background = Game.difficulties[Game.difficulty].name === 'F√ÅCIL' ? 
                        '#00B09B' : Game.difficulties[Game.difficulty].name === 'M√âDIO' ? 
                        '#FFA62E' : '#FF416C';
                });
            });
            
            // Power-ups
            elements.powerupSlow.addEventListener('click', () => {
                activatePowerUp('slowTime', 50);
            });
            
            elements.powerupDouble.addEventListener('click', () => {
                activatePowerUp('doublePoints', 100);
            });
            
            elements.powerupAuto.addEventListener('click', () => {
                activatePowerUp('autoClick', 150);
            });
            
            // Clique fora do alvo (puni√ß√£o)
            elements.shootingRange.addEventListener('click', handleMissClick);
            
            // Itens da loja
            document.querySelectorAll('.shop-item[data-price]').forEach(item => {
                item.addEventListener('click', () => {
                    const price = parseInt(item.dataset.price);
                    const skinName = item.querySelector('div:nth-child(2)').textContent.toLowerCase();
                    
                    if (Game.coins >= price) {
                        Game.coins -= price;
                        Game.skin = skinName;
                        
                        item.classList.add('owned');
                        item.style.background = 'rgba(0, 176, 155, 0.1)';
                        item.style.borderColor = '#00B09B';
                        
                        updateCurrentTarget();
                        updateUI();
                        saveProgress();
                        
                        alert(`‚úÖ Skin ${skinName} comprada com sucesso!`);
                    } else {
                        alert('‚ùå Moedas insuficientes!');
                    }
                });
            });
            
            // Fechar modais clicando fora
            window.addEventListener('click', (event) => {
                if (event.target === elements.gameOverModal) {
                    elements.gameOverModal.style.display = 'none';
                }
                if (event.target === elements.shopModal) {
                    elements.shopModal.style.display = 'none';
                }
            });
            
            // Prevenir clique direito
            document.addEventListener('contextmenu', (e) => {
                if (e.target.closest('.shooting-range')) {
                    e.preventDefault();
                }
            });
            
            // Auto-click quando power-up ativo
            setInterval(() => {
                if (Game.active && Game.powerUps.autoClick && !Game.paused) {
                    const targets = elements.shootingRange.querySelectorAll('.target');
                    if (targets.length > 0) {
                        const randomTarget = targets[Math.floor(Math.random() * targets.length)];
                        randomTarget.click();
                    }
                }
            }, 300); // 3 cliques por segundo
        }

        // =============================================
        // INICIALIZAR O JOGO
        // =============================================
        document.addEventListener('DOMContentLoaded', initGame);

        // =============================================
        // SISTEMA DE TESTES
        // =============================================
        console.log("üéØ TARGET MASTER ULTIMATE - CARREGADO!");
        console.log("‚úÖ Todos os sistemas funcionando");
        console.log("‚úÖ Sistema de puni√ß√£o por erro ativo");
        console.log("‚úÖ Cada alvo s√≥ pode ser clicado uma vez");
        console.log("‚úÖ Power-ups funcionais");
        console.log("‚úÖ Sistema de salvamento ativo");
        console.log("üéÆ PRONTO PARA JOGAR!");
    </script>
</body>
</html>
